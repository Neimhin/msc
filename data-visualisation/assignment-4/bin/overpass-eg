#!/usr/bin/env python
import requests
import json

def get_gaza_polygon():
    # Define the Overpass API URL
    overpass_url = "http://overpass-api.de/api/interpreter"

    # Define the Overpass QL query
    overpass_query = """
    [out:json];
    (
      relation["name"="West Bank"];
    );
    out geom;
    """

    # Send the request
    response = requests.get(overpass_url, params={'data': overpass_query})
    data = response.json()
    print("data:",data.keys())

    print(len(data['elements']))
    for element in data['elements']:
        print(element.keys())
        print(element['tags'])
        exit()

    # Check if we have a valid response
    if data.get("elements"):
        # Extract the first element (should be Gaza City)
        element = data["elements"][0]

        # Check if it's a relation and has geometry
        if element["type"] == "relation" and "geometry" in element:
            return element["geometry"]
    return None

# Fetch and print the polygon of Gaza City
gaza_polygon = get_gaza_polygon()
exit()
if gaza_polygon:
    print(json.dumps(gaza_polygon, indent=2))
else:
    print("Could not fetch the polygon data for Gaza City.")

